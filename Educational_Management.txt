#Database Creation
create  database Educational_database;

#using db
use Educational_database;

#Table 1 - student
create table student_record(
s_id int auto_increment primary key,
s_name varchar(50) not null,
dept_name varchar(20) not null,
email varchar(100) not null unique,
mobile_no varchar(11) not null,
address_line1 varchar(150),
address_line2 varchar(150),
city Varchar(50),
state Varchar(50),
pincode VArchar(6)
);


#validation using Regex_Like
#Email
Delimiter $$
Create Trigger Student_email_validation
BEFORE INSERT ON student_record
FOR EACH ROW
BEGIN
    IF NEW.email NOT REGEXP '^[A-Za-z0-9._%+-]+@gmail\.com$' THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Invalid email format';
    END IF;
END$$
DELIMITER ;

#ph
DELIMITER $$
CREATE TRIGGER Ph_validation
BEFORE INSERT ON student_record
FOR EACH ROW
BEGIN
    IF NEW.mobile_no NOT REGEXP '^[6-9][0-9]{9}$' THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Invalid mobile number';
    END IF;
END$$
DELIMITER ;

#Table 2- Dept
create table department(
dept_id int primary key auto_increment,
dept_name varchar(10) not null unique
);


#Table 3 - faculty

create table faculty(
f_id int auto_increment primary key,
f_name varchar(50) not null,
dept_id int not null,

constraint f_dept
foreign key (dept_id)
references department(dept_id)
);



